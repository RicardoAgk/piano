(this.webpackJsonppianotest=this.webpackJsonppianotest||[]).push([[0],{154:function(t,e,n){},167:function(t,e,n){},168:function(t,e,n){},499:function(t,e,n){"use strict";n.r(e);var s=n(0),a=n(2),i=n.n(a),o=n(12),r=n.n(o),c=(n(167),n(4)),l=n(6),u=n(9),d=n(8),h=(n(168),n(10)),m=n(33),j=n(66),p=n.n(j),f=function t(){var e=this;Object(c.a)(this,t),this.signup=function(t,n){return e.service.post("/signup",{username:t,password:n})},this.login=function(t,n){return e.service.post("/login",{username:t,password:n})},this.logout=function(){return e.service.post("/logout")},this.loggedin=function(){return e.service.get("/loggedin")},this.addInstrument=function(t){return e.service.post("/profile",{instrument:t})};var n=p.a.create({baseURL:"".concat("http://localhost:5000","/api"),withCredentials:!0});this.service=n},b=n(15),g=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={username:"",password:""},t.handleChange=function(e){var n=e.target,s=n.name,a=n.value;t.setState(Object(m.a)({},s,a))},t.handleFormSubmit=function(e){e.preventDefault(),(new f).signup(t.state.username,t.state.password).then((function(){t.props.history.push("/world")}))},t}return Object(l.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"signup-page",children:Object(s.jsx)("div",{className:"signup-page",children:Object(s.jsxs)("div",{className:"container container-login column is-two-fifths pt-5",children:[Object(s.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(s.jsx)("div",{className:"container field column is-half mt-5",children:Object(s.jsxs)("p",{className:"control has-icons-left has-icons-right",children:[Object(s.jsx)("input",{className:"input",type:"text",name:"username",value:this.state.username,onChange:this.handleChange,placeholder:"Username"}),Object(s.jsx)("span",{className:"icon is-small is-left",children:Object(s.jsx)("i",{className:"fas fa-user"})}),Object(s.jsx)("span",{className:"icon is-small is-right",children:Object(s.jsx)("i",{placeholder:"fas fa-check"})})]})}),Object(s.jsx)("div",{className:"container field column is-half",children:Object(s.jsxs)("p",{className:"control has-icons-left",children:[Object(s.jsx)("input",{className:"input",type:"password",name:"password",value:this.state.password,onChange:this.handleChange,placeholder:"Password"}),Object(s.jsx)("span",{className:"icon is-small is-left",children:Object(s.jsx)("i",{className:"fas fa-lock"})})]})}),Object(s.jsx)("div",{className:"field",children:Object(s.jsx)("p",{className:"control",children:Object(s.jsx)("button",{type:"submit",className:"button is-success",children:"Signup"})})})]}),Object(s.jsxs)("p",{children:["Already have account?",Object(s.jsx)(b.b,{to:"/login",children:" Login"})]})]})})})}}]),n}(i.a.Component),O=Object(h.g)(g),v=n(65),x=(n(56),n(71),n(72),function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={username:"",password:""},t.handleChange=function(e){var n=e.target,s=n.name,a=n.value;t.setState(Object(m.a)({},s,a))},t.handleFormSubmit=function(e){e.preventDefault();var n=t.state,s=n.username,a=n.password;(new f).login(s,a).then((function(e){t.props.setCurrentUser(e.data),localStorage.setItem("loggedInUser",e.data._id),t.props.history.push("/world")})).catch((function(){v.a.error("Invalid Login")}))},t}return Object(l.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"login-page",children:Object(s.jsx)("div",{className:"container container-login column is-two-fifths pt-5",children:Object(s.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(s.jsx)("div",{className:"container field column is-half mt-5",children:Object(s.jsxs)("p",{className:"control has-icons-left has-icons-right",children:[Object(s.jsx)("input",{className:"input",type:"text",name:"username",value:this.state.username,onChange:this.handleChange,placeholder:"Username"}),Object(s.jsx)("span",{className:"icon is-small is-left",children:Object(s.jsx)("i",{className:"fas fa-user"})}),Object(s.jsx)("span",{className:"icon is-small is-right",children:Object(s.jsx)("i",{placeholder:"fas fa-check"})})]})}),Object(s.jsx)("div",{className:"container field column is-half",children:Object(s.jsxs)("p",{className:"control has-icons-left",children:[Object(s.jsx)("input",{className:"input",type:"password",name:"password",value:this.state.password,onChange:this.handleChange,placeholder:"Password"}),Object(s.jsx)("span",{className:"icon is-small is-left",children:Object(s.jsx)("i",{className:"fas fa-lock"})})]})}),Object(s.jsx)("div",{className:"field",children:Object(s.jsx)("p",{className:"control",children:Object(s.jsx)("button",{type:"submit",className:"button is-rounded is-info is-inverted is-outlined",children:"Login"})})})]})})})}}]),n}(i.a.Component)),N=Object(h.g)(x),y=(n(189),n(159)),w=n.n(y),C=n(34),k=n(7),S=(n(153),n(160)),I=n.n(S),A=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{children:this.props.children({containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight})})}}]),n}(i.a.Component),U=I()()(A),L=n(161),R=n.n(L),_=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t){var s;return Object(c.a)(this,n),(s=e.call(this,t)).loadInstrument=function(t){s.setState({instrument:null}),R.a.instrument(s.props.audioContext,t,{format:s.props.format,soundfont:s.props.soundfont,nameToUrl:function(t,e,n){return"".concat(s.props.hostname,"/").concat(e,"/").concat(t,"-").concat(n,".js")}}).then((function(t){s.setState({instrument:t})}))},s.playNote=function(t){s.resumeAudio().then((function(){var e=s.state.instrument.play(t);s.setState({activeAudioNodes:Object.assign({},s.state.activeAudioNodes,Object(m.a)({},t,e))})}))},s.stopNote=function(t){s.resumeAudio().then((function(){s.state.activeAudioNodes[t]&&(s.state.activeAudioNodes[t].stop(),s.setState({activeAudioNodes:Object.assign({},s.state.activeAudioNodes,Object(m.a)({},t,null))}))}))},s.resumeAudio=function(){return"suspended"===s.props.audioContext.state?s.props.audioContext.resume():Promise.resolve()},s.stopAllNotes=function(){s.props.audioContext.resume().then((function(){Object.values(s.state.activeAudioNodes).forEach((function(t){t&&t.stop()})),s.setState({activeAudioNodes:{}})}))},s.state={activeAudioNodes:{},instrument:null},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadInstrument(this.props.instrumentName)}},{key:"componentDidUpdate",value:function(t,e){if(t.instrumentName!==this.props.instrumentName&&this.loadInstrument(this.props.instrumentName),e.instrument!==this.state.instrument){if(!this.props.onLoad)return;this.props.onLoad({playNote:this.playNote,stopNote:this.stopNote,stopAllNotes:this.stopAllNotes})}}},{key:"render",value:function(){return this.props.render?this.props.render({isLoading:!this.state.instrument,playNote:this.playNote,stopNote:this.stopNote,stopAllNotes:this.stopAllNotes}):null}}]),n}(i.a.Component);_.defaultProps={format:"mp3",soundfont:"MusyngKite",instrumentName:"acoustic_grand_piano"};var M=_,D=(n(154),new(window.AudioContext||window.webkitAudioContext),{first:k.b.fromNote("c3"),last:k.b.fromNote("f4")});k.a.create({firstNote:D.first,lastNote:D.last,keyboardConfig:k.a.HOME_ROW});new(window.AudioContext||window.webkitAudioContext);var H={first:k.b.fromNote("c3"),last:k.b.fromNote("f4")};k.a.create({firstNote:H.first,lastNote:H.last,keyboardConfig:k.a.HOME_ROW});var F=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={instrumentList:null},t.loadInstrumentList=function(){fetch("".concat(t.props.hostname,"/").concat(t.props.soundfont,"/names.json")).then((function(t){return t.json()})).then((function(e){t.setState({instrumentList:e})}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadInstrumentList()}},{key:"render",value:function(){return this.props.render(this.state.instrumentList)}}]),n}(i.a.Component);F.defaultProps={soundfont:"MusyngKite"};var P=F,W=n(162),E=[":)","banjo","electric_guitar_jazz","acoustic_guitar_steel","distortion_guitar","harmonica","gunshot"],K=[":)","marimba","blown_bottle","charang","tango_accordion"],z=[":)","kalimba","agogo"],T=[":)","glockenspiel","church_organ","french_horn","tuba","acoustic_grand_piano"],B=[":)","shakuhachi","sitar","shanai","shamisen","shakuhachi","taiko_drum"],J=[":)","whistle","seashore","synth_drum"],q=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t){var s;return Object(c.a)(this,n),(s=e.call(this,t)).onChange=function(t){s.props.onChange(t),s.selectRef.current.blur()},s.selectRef=i.a.createRef(),s}return Object(l.a)(n,[{key:"render",value:function(){var t=this.props,e=t.children,n=(t.onChange,Object(W.a)(t,["children","onChange"]));return Object(s.jsx)("select",Object(C.a)(Object(C.a)({},n),{},{onChange:this.onChange,ref:this.selectRef,children:e}))}}]),n}(i.a.Component);function G(t){return Object(s.jsx)("small",{className:"mb-1 text-muted",children:t.children})}var Q=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={newInstrumentList:null,continentName:"",loaded:!1},t.handleKeyDown=function(e){var n=t.props.config.noteRange.last-t.props.config.noteRange.first+1-t.props.keyboardShortcuts.length;if("ArrowLeft"===e.key){var s=t.props.config.keyboardShortcutOffset-1;s>=0&&t.props.setConfig({keyboardShortcutOffset:s})}else if("ArrowRight"===e.key){var a=t.props.config.keyboardShortcutOffset+1;a<=n&&t.props.setConfig({keyboardShortcutOffset:a})}},t.onChangeFirstNote=function(e){t.props.setConfig({noteRange:{first:parseInt(e.target.value,10),last:t.props.config.noteRange.last}})},t.onChangeLastNote=function(e){t.props.setConfig({noteRange:{first:t.props.config.noteRange.first,last:parseInt(e.target.value,10)}})},t.onChangeInstrument=function(e){t.props.setConfig({instrumentName:e.target.value})},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.continent;"na"===t?this.setState({newInstrumentList:E,continentName:"North America",loaded:!0}):"sa"===t?this.setState({newInstrumentList:K,continentName:"South America",loaded:!0}):"af"===t?this.setState({newInstrumentList:z,continentName:"Africa",loaded:!0}):"eu"===t?this.setState({newInstrumentList:T,continentName:"Europe",loaded:!0}):"as"===t?this.setState({newInstrumentList:B,continentName:"Asia",loaded:!0}):"oc"===t&&this.setState({newInstrumentList:J,continentName:"Oceania",loaded:!0}),window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){k.b.NATURAL_MIDI_NUMBERS.reduce((function(t,e){return t[e]=k.b.getAttributes(e).note,t}),{});var t=this.props.config,e=(t.noteRange,t.instrumentName);return Object(s.jsx)("div",{className:"form-row",children:Object(s.jsxs)("div",{className:"col-md-10",children:[Object(s.jsx)("div",{className:"continent-name",children:Object(s.jsx)("p",{children:this.state.continentName})}),Object(s.jsxs)("div",{className:"col is-vcentered",children:[Object(s.jsx)(G,{}),Object(s.jsx)("div",{className:"choose-instrument",children:"Choose an Instrument from the List"}),this.state.loaded?Object(s.jsx)(q,{className:"form-control",value:e,onChange:this.onChangeInstrument,children:this.state.newInstrumentList.map((function(t){return Object(s.jsx)("option",{value:t,children:t},t)}))}):Object(s.jsx)("p",{children:"Loading"})]})]})})}}]),n}(i.a.Component),V=function(){function t(){Object(c.a)(this,t);var e=p.a.create({baseURL:"".concat("http://localhost:5000","/api")});this.service=e}return Object(l.a)(t,[{key:"getAll",value:function(){return this.service.get("/profile")}},{key:"getProfile",value:function(t){return this.service.get("/profile/".concat(t))}},{key:"editProject",value:function(t){return this.service.put("/profile/".concat(t.id),t)}}]),t}(),X={first:k.b.fromNote("c3"),last:k.b.fromNote("f4")},Y=(k.a.create({firstNote:X.first,lastNote:X.last,keyboardConfig:k.a.HOME_ROW}),function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={config:{instrumentName:"",noteRange:{first:k.b.fromNote("c3"),last:k.b.fromNote("f5")},keyboardShortcutOffset:0},user:{name:"",instruments:""}},t.handleFormSubmit=function(){(new V).editProject(t.state.loggedInUser.username,t.state.loggedInUser.instruments),t.setState({name:t.state.loggedInUser.username,instruments:Object(C.a)({},t.state.loggedInUser.instruments)})},t}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=k.a.create({firstNote:this.state.config.noteRange.first+this.state.config.keyboardShortcutOffset,lastNote:this.state.config.noteRange.last+this.state.config.keyboardShortcutOffset,keyboardConfig:k.a.HOME_ROW});return""==this.state.config.instrumentName?Object(s.jsx)("div",{className:"facts-page",children:Object(s.jsx)(M,{audioContext:this.props.audioContext,instrumentName:this.state.config.instrumentName,hostname:this.props.soundfontHostname,render:function(n){n.isLoading,n.playNote,n.stopNote;var a=n.stopAllNotes;return Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col-md-6",children:Object(s.jsx)(P,{hostname:t.props.soundfontHostname,render:function(n){return Object(s.jsx)(Q,{continent:t.props.continent,config:t.state.config,setConfig:function(e){t.setState({config:Object.assign({},t.state.config,e)}),a()},instrumentList:n||[t.state.config.instrumentName],keyboardShortcuts:e})}})}),Object(s.jsx)("div",{className:"col-md-6",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsx)("div",{width:"5px",children:Object(s.jsx)("img",{width:"400",src:"images/fact-".concat(Math.ceil(10*Math.random()),".jpg"),alt:"facts about refugees from the UNHCR"})})})})]})})}})}):Object(s.jsxs)("div",{className:"piano-page",children:[Object(s.jsx)("p",{children:this.state.config.instrumentName}),Object(s.jsx)("form",{onSubmit:this.handleFormSubmit,children:Object(s.jsx)("button",{type:"submit",children:"Add this instrument to my list"})}),Object(s.jsx)("div",{}),Object(s.jsx)(U,{children:function(n){var a=n.containerWidth;n.containerHeight;return Object(s.jsx)(M,{audioContext:t.props.audioContext,instrumentName:t.state.config.instrumentName,hostname:t.props.soundfontHostname,render:function(n){var i=n.isLoading,o=n.playNote,r=n.stopNote;return Object(s.jsx)(k.c,{noteRange:X,width:a,playNote:o,stopNote:r,disabled:i,keyboardShortcuts:e,instrumentName:t.state.config.instrumentName})}})}})]})}}]),n}(i.a.Component)),Z=new(window.AudioContext||window.webkitAudioContext),$="https://d1pzp51pvbm36p.cloudfront.net",tt=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={clicked:""},t.updateMyState=function(e){t.setState({clicked:e})},t}return Object(l.a)(n,[{key:"render",value:function(){var t=this;return""===this.state.clicked?Object(s.jsx)("div",{className:"mapa",children:Object(s.jsx)(w.a,{updateMyState:function(e){return t.updateMyState(e)}})}):"na"===this.state.clicked||"sa"===this.state.clicked||"af"===this.state.clicked||"eu"===this.state.clicked||"as"===this.state.clicked||"oc"===this.state.clicked?Object(s.jsx)(Y,{continent:this.state.clicked,audioContext:Z,soundfontHostname:$}):Object(s.jsx)("p",{children:"vai fazer uma conta"})}}]),n}(i.a.Component),et=Object(h.g)(tt),nt=(n(155),function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).logoutUser=function(){(new f).logout().then((function(){t.props.setCurrentUser(null),localStorage.removeItem("loggedInUser")}))},t}return Object(l.a)(n,[{key:"render",value:function(){return this.props.loggedInUser?Object(s.jsxs)("nav",{className:"navbar is-info navbar-expand-md",children:[Object(s.jsxs)("ul",{className:"navbar-nav",children:[Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)(b.c,{className:"nav-link has-text-primary-dark is-family-code",exact:!0,to:"/world",children:"World"})}),Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)(b.c,{className:"nav-link has-text-primary-dark is-family-code",exact:!0,to:"/profile/".concat(this.props.loggedInUser._id),children:"Profile"})})]}),Object(s.jsx)("ul",{className:"navbar-nav",children:Object(s.jsx)("li",{className:"nav-item navbar-end",children:Object(s.jsx)(b.c,{className:"nav-link is-family-code navbar-end",to:"/",children:Object(s.jsx)("button",{className:"navbar-end button has-text-warning is-outlined",onClick:this.logoutUser,children:"Logout"})})})})]}):Object(s.jsx)("nav",{className:"navbar is-info navbar-expand-md",children:Object(s.jsxs)("ul",{className:"navbar-nav navbar-end is-transparent",children:[Object(s.jsx)("li",{className:"nav-item is-transparent",children:Object(s.jsx)(b.c,{className:"nav-link has-text-danger-light is-family-code",exact:!0,to:"/login",children:"Login"})}),Object(s.jsx)("li",{className:"nav-item is-transparent",children:Object(s.jsx)(b.c,{className:"nav-link has-text-warning is-family-code",exact:!0,to:"/signup",children:"Signup"})})]})})}}]),n}(i.a.Component)),st=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={username:"",instruments:[""]},t}return Object(l.a)(n,[{key:"render",value:function(){if(this.props.loggedInUser)return Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{children:["Username: ",this.props.loggedInUser.username]}),Object(s.jsxs)("p",{children:["Instruments: ",this.props.loggedInUser.instruments.name]})]})}}]),n}(i.a.Component),at=Object(h.g)(st),it=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"welcome-page",children:Object(s.jsxs)("div",{className:"column is-three-fifths",children:[Object(s.jsx)("h1",{children:"Welcome"}),Object(s.jsx)("p",{children:"We invite you to get SAD and have a little bit of fun"}),Object(s.jsx)("p",{})]})})}}]),n}(i.a.Component),ot=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={loggedInUser:null},t.setCurrentUser=function(e){t.setState({loggedInUser:e})},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;null===this.state.loggedInUser&&(new f).loggedin().then((function(e){e.data._id?(t.setCurrentUser(e.data),localStorage.setItem("loggedInUser",e.data._id)):localStorage.removeItem("loggedInUser")}))}},{key:"render",value:function(){var t=this;return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(nt,{loggedInUser:this.state.loggedInUser,setCurrentUser:this.setCurrentUser}),Object(s.jsxs)(h.d,{children:[Object(s.jsx)(h.b,{exact:!0,path:"/",component:it}),Object(s.jsx)(h.b,{exact:!0,path:"/world",component:et}),Object(s.jsx)(h.b,{exact:!0,path:"/world",render:function(){return localStorage.getItem("loggedInUser")?Object(s.jsx)(h.a,{to:"/world"}):Object(s.jsx)(h.a,{to:"/login"})}}),Object(s.jsx)(h.b,{path:"/signup",component:O}),Object(s.jsx)(h.b,{path:"/login",render:function(){return Object(s.jsx)(N,{setCurrentUser:t.setCurrentUser})}}),Object(s.jsx)(h.b,{path:"/login-google",render:function(){window.location.href="".concat("http://localhost:5000","/api/auth/google")}}),Object(s.jsx)(h.b,{path:"/profile/:id",render:function(){return Object(s.jsx)(at,{loggedInUser:t.state.loggedInUser,setCurrentUser:t.setCurrentUser,instruments:t.state.instruments})}})]})]})}}]),n}(i.a.Component),rt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,503)).then((function(e){var n=e.getCLS,s=e.getFID,a=e.getFCP,i=e.getLCP,o=e.getTTFB;n(t),s(t),a(t),i(t),o(t)}))};r.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(b.a,{children:Object(s.jsx)(ot,{})})}),document.getElementById("root")),rt()},72:function(t,e,n){}},[[499,1,2]]]);
//# sourceMappingURL=main.f13bacb2.chunk.js.map